import 'dart:convert';import 'package:awesome_dialog/awesome_dialog.dart';import 'package:e_commerce_project/core/class/crud.dart';import 'package:e_commerce_project/core/constant/app_routes_name.dart';import 'package:e_commerce_project/core/functions/statusRequest.dart';import 'package:e_commerce_project/data/data_source/remote/address/address.dart';import 'package:e_commerce_project/data/data_source/static/static.dart';import 'package:e_commerce_project/data/model/address.dart';import 'package:flutter/cupertino.dart';import 'package:get/get.dart';import 'package:lottie/lottie.dart';class AddressController extends GetxController {  Address address = Address(Crud());  TextEditingController cont_name = TextEditingController();  TextEditingController cont_city = TextEditingController();  TextEditingController cont_street = TextEditingController();  double latt = 0;  double longg = 0;  List addresses = [];  add_address(    String user_id,    String address_name,    String city,    String street,    String lat,    String long,  ) async {    try {      await address          .add_address(user_id, address_name, city, street, lat, long)          .then(        (val) async {          cont_name.clear();          cont_city.clear();          cont_street.clear();          latt = 0;          longg = 0;          Get.back();          AwesomeDialog(title: 'The address has been added successfully'.tr,            // body: Column(            //   children: [            //     Text(            //       'The address has been added successfully'.tr,            //       style: Get.textTheme.headline1,            //     ),            //     // Lottie.asset('assets/lottie/done.json'),            //   ],            // ),            context: Get.context!,            dialogType: DialogType.success,            animType: AnimType.rightSlide,            // desc: '',            autoHide: Duration(milliseconds: 2000),          ).show();          await view_address();          update();        },      );    } catch (e) {      print('e');      print(e);      print('e');      AwesomeDialog(        body: Column(          children: [            Text(              'The address could not be added'.tr,              style: Get.textTheme.headline1,            ),            Lottie.asset('assets/lottie/done.json'),          ],        ),        context: Get.context!,        dialogType: DialogType.noHeader,        animType: AnimType.rightSlide,        // desc: '',        autoHide: Duration(milliseconds: 2000),      ).show();    }  }  StatusRequest statusRequest = StatusRequest.init;  view_address() async {    statusRequest = StatusRequest.loading ;    try {      // statusRequest = StatusRequest      await address.view_address(user_id.toString()).then((v) {        if (v['status'] == 'success') {          addresses = [];          v['data'].forEach((element) {            print(element);            print('44444444444444444444444444444444444444444');          });          addresses = v['data'] ;          addresses = addresses.reversed.toList();          statusRequest = StatusRequest.success ;          update();        } else {          print('error');          statusRequest = StatusRequest.failure ;          update();        }      });    } catch (e) {      print('Error View Address');      print('Error : ' + e.toString());      statusRequest = StatusRequest.failure ;      update();    }  }  go_to_add_address_screen() {    Get.toNamed(AppRouteName.new_address);  }  @override  void onInit() async {    // TODO: implement onInit    await view_address();    print(addresses);    print('addresses');    print('addresses');    print('addresses');    print('addresses');    print(addresses.length);    print(addresses);    print(addresses);    print(addresses);    print(addresses);    super.onInit();  }}